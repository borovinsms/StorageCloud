# Дипломная работа “Облачное хранилище”

# Исходные данные

## Техническое задание

Разработать приложение - REST-сервис. Сервис должен предоставить REST интерфейс для возможности загрузки файлов и вывода списка уже загруженных файлов пользователя. 
Все запросы к сервису должны быть авторизованы. Заранее подготовленное веб-приложение (FRONT) должно подключаться к разработанному сервису без доработок, 
а также использовать функционал FRONT для авторизации, загрузки и вывода списка файлов пользователя.

#### Требования к приложению:

- Сервис должен предоставлять REST интерфейс для интеграции с FRONT
- Сервис должны реализовывать все методы описанные [yaml файле](./server/CloudServiceSpecification.yaml):
  1. Вывод списка файлов
  2. Добавление файла
  3. Удаление файла
  4. Авторизация
- Все настройки должны вычитываться из файла настроек (yml)
- Информация о пользователях сервиса (логины для авторизации) и данных должны храниться в базе данных (на выбор студента)

#### Требования в реализации

- Приложение разработано с использованием Spring Boot
- Использован сборщик пакетов gradle/maven
- Для запуска используется docker, docker-compose
- Код размещен на github
- Код покрыт unit тестами с использованием mockito
- Добавлены интеграционные тесты с использованием testcontainers

#### Авторизация приложения:

FRONT приложение использует header `auth-token` в котором отправляет токен (ключ-строка) для идентификации пользователя на BACKEND.
Для получения токена нужно пройти авторизацию на BACKEND и отправить на метод /login пару логин и пароль, в случае успешной проверки в ответ BACKEND должен вернуть json объект
с полем `auth-token` и значением токена. Все дальейшие запросы с FRONTEND, кроме метода /login отправляются с этим header.
Для выхода из приложения нужно вызвать метод BACKEND /logout, который удалит/деактивирует токен и последующие запросы с этим токеном будут не авторизованы и возвращать код 401.

> Для запуска FRONT приложения с расширенным логированием нужно использовать команду: npm run serve

## Описание и запуск FRONT

1. Установить nodejs (версия не ниже 14.15.0) на компьютер следуя инструкции: https://nodejs.org/ru/download/
2. Скачать [FRONT](./webclient/front) (JavaScript)
3. Перейти в папку FRONT приложения и все команды для запуска выполнять из нее.
4. Следуя описанию README.md FRONT проекта запустить nodejs приложение (npm install...)
5. Можно задать url для вызова своего backend сервиса:
    1. В файле `.env` FRONT (находится в корне проекта) приложения нужно изменить url до backend, например: `VUE_APP_BASE_URL=http://localhost:8080`
    2. Пересобрать и запустить FRONT снова: `npm run build`
    3. Измененный `url` сохранится для следующих запусков.
6. По-умолчанию FRONT запускается на порту 8080 и доступен по url в браузере `http://localhost:8080`

# Результат выполнения

## Запуск SERVER

1. Перейти в папку SERVER приложения и все команды для запуска выполнять из нее.
2. Выполнить по очереди команды `mvn clean`, `mvn package`, `java -jar target/StorageCloud-0.0.1-SNAPSHOT.jar`.
3. Серевер будет принимать запросы на заданный порт (по умолчанию 8000).
4. Настройки сервера в файле `application.yml` директории `resources`.

## Описание и запуск всего приложения в среде Docker

1. Перейти в папку SERVER приложения и все команды для запуска выполнять из нее.
2. Выполнить по очереди команды `mvn clean`, `mvn package`, `docker compose build`.
3. После завершения монтирования образов, запуск приложения осуществляется командой `docker compose up`.
4. Доступ к приложению из браузера по адресу `http://localhost:8080/`.
5. Настройки сервера в файле `application.yml` директории `resources`.
